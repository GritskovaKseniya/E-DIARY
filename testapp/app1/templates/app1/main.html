{% extends 'app1/base.html' %}

{% block title %}Главная страница{% endblock %}

{% block content %}

<div class="container">
  <div class="row">
  <h4 class="col-sm-7">Расписание на сегодня.</h4>
    <div class="date_time" id="current_date_time_block"></div>
<script type="text/javascript">

    /* функция добавления ведущих нулей */
    /* (если число меньше десяти, перед числом добавляем ноль) */
    function zero_first_format(value)
    {
        if (value < 10)
        {
            value='0'+value;
        }
        return value;
    }

    /* функция получения текущей даты и времени */
    function date_time()
    {
        var current_datetime = new Date();
        var day = zero_first_format(current_datetime.getDate());
        var month = zero_first_format(current_datetime.getMonth()+1);
        var year = current_datetime.getFullYear();
        var hours = zero_first_format(current_datetime.getHours());
        var minutes = zero_first_format(current_datetime.getMinutes());
        var seconds = zero_first_format(current_datetime.getSeconds());
        let dayOfTheWeek = ['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота','Воскресенье']

        return day+"."+month+"."+year+" "+ dayOfTheWeek[current_datetime.getUTCDay()]+" "+hours+":"+minutes;
    }

    /* update date every second */
    setInterval(() => document.getElementById('current_date_time_block').innerHTML = date_time(),1000)

</script>

    <table class="table table-bordered table-striped">
      <tr><td><b>№</b></td><td><b>Время</b></td><td><b>Урок</b></td><td><b>Домашнее задание</b></td></tr>
      {% for lesson in timetable %}
      <div class=" name-output">
      <tr>
        <td>{{lesson.number}}</td><td>{{lesson.time}}</td><td>{{lesson.title}}</td><td>{{lesson.homework}}</td>
      </tr>
      </div>
      {% endfor %}
    </tbody>
  </table>
  </div>
  <div class="col-sm-4">

  </div>
  </div>
</div>

</body>
</html>
{% endblock %}
